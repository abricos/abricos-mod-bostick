<!--[*]
[tt=module]_sys[/tt]
[mod=user]userblock[/mod]
[css]/tt/default/css/main.css[/css]
[script]content_index.php[/script]
[*]-->
<style>
<!--
.clear { clear: both; }
.mod-bostick .workspace .manager { position: relative; margin: 10px 20px; }
.mod-bostick .workspace .manager h2 { float: left; }
.mod-bostick .workspace .manager #menu { margin-left: 200px; }
.mod-bostick .workspace .manager #menu a { margin-right: 5px; }
.mod-bostick .workspace .buser { position: absolute; top: 1px; right: 10px; }
.mod-bostick .workspace .buser span { font-size: 1.2em; vertical-align: top; }
.mod-bostick .blockcenter { margin: 150px auto; width: 320px; font-size: 1.2em; }
.mod-bostick .aw-bostick-icon .aligner span { display: block; }
-->
</style>
<div class="mod-bostick">
	<div class="workspace">
		<div class="manager">
			<h2>{#content.index.1}</h2>
			<div id="menu">
				<a href="/" title="{#content.index.2}">{#content.index.3}</a>
				<a href="/bos/" id="btnBosUI" title="{#content.index.4}" style="display: none">{#content.index.5}</a>
			</div>
			<div class="clear"></div>
			<div id="stickButton"></div>
			<div class="buser">
				<span>{v#username}</span>
				(<a href="#" onclick="Brick.mod.user.API.userLogout(); return false;" title="{#content.index.6}" >{#content.index.7}</a>)
			</div>
		</div>
	</div>
	<div class="blockcenter">
		<div id="bostickLoading">
			<div>{#content.index.8}</div>
			<div>{#content.index.9}</div>
		</div>
	</div>
</div>
<script>
	Brick.ff('user', 'api');
	// вызвать JS компонент board модуля bostick
	Brick.ff('bostick', 'board', function(){
		// по окончанию загрузки компонента board выполнить эту функцию
		var Dom = YAHOO.util.Dom,
			NS = Brick.mod.bostick;
		if (Brick.componentExists('bos', 'os')){
			// если в платформе не установлен модуль bos, то скрыть 
			// HTML элемент btnBosUI
			Dom.get('btnBosUI').style.display = '';
		}
		// отобразить кнопку добавления стикера. В процессе вызова этой кнопки
		// происходит процесс инициализации приложения с загрузкой всех необходимых
		// данных. 
		NS.API.showIconWidget(Dom.get('stickButton'), function(manager){
			// приложение инициализировано, теперь необходимо скрыть HTML элемент bostickLoading
			Dom.get('bostickLoading').style.display = 'none';
		});
	});
</script>
